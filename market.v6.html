<script>
    const admins = [
        {
            username: 'ryan01', 
            password: 'abc123'
        },
        {
            username: 'avi01', 
            password: 'bca321'
        }
    ]

    const products = [
        {
            name: 'Iphone 11', 
            price: 6000000,
            stock: 30, 
        },
        {
            name: 'Samsung Z Flip', 
            price: 15000000, 
            stock: 15
        }
    ]

    const relistingProducts = []
    
    function CheckAdminLogin(inputUsername, inputPassword){
        var isLogin = false
        admins.forEach(item => {
            if(item.username === inputUsername && item.password === inputPassword) isLogin = true
        })

        return isLogin
    }

    function ShowProducts(dataToShow){
        let printProduct = ''
        dataToShow.forEach((item, index) => {
            printProduct += `${index+1}. ${item.name} (Stock: ${item.stock}): Rp.${item.price.toLocaleString('id-ID')} \n`
        })

        return printProduct
    }

    // MAIN MENU
    do{
        var selectedUser = Number(prompt('Select User: \n 1. Admin \n 2. User'))

        if(selectedUser === 1){
            // MENU ADMIN
            do{
                let inputUsername = prompt('Input Username:')
                let inputPassword = prompt('Input Password:')

                // Function CheckAdminLogin Menghasilkan Return isLogin Berupa true/false
                var checkAdminLogin = CheckAdminLogin(inputUsername, inputPassword) 

                if(checkAdminLogin === false){
                    alert('Username or Password Invalid!')
                }else{
                    alert('Login Success!')

                    do{
                        var showPrompt = true
                        var adminMenus = ['Show List Product', 'Create New Product', 'Edit Product', 'Delete Product', 'Relisting Product']
                        let showAdminMenus = ''
                        adminMenus.forEach((item, index) => {
                            showAdminMenus += `${index+1}. ${item} \n`
                        })
                        var selectedMenu = Number(prompt(showAdminMenus))-1 

                        if(selectedMenu === 0){
                            // Show List Product
                            alert(ShowProducts(products))
                        }else if(selectedMenu === 1){
                            // Create New Product
                            do{
                                let inputProductName = prompt('Input Product Name')

                                var isProductExist = false
                                products.forEach(item =>{
                                    if(item.name === inputProductName){
                                        isProductExist = true 
                                    }
                                })

                                if(isProductExist === true) alert('Product Already Exist!')
                            }while(isProductExist === true)

                            let inputProductPrice = Number(prompt('Input Product Price'))
                            let inputProductStock = Number(prompt('Input Product Stock'))

                            products.push({name: inputProductName, price: inputProductPrice, stock: inputProductStock})

                            alert('Create Product Success!')
                        }else if(selectedMenu === 2){
                            // Edit Product
                           var selectedProduct = Number(prompt(`${ShowProducts(products)} \n Input Product to Update:`))-1
                           var selectedDataToUpdate = Number(prompt(`Select Data to Update: \n 1. Name \n 2. Price \n 3. Stock`))

                           if(selectedDataToUpdate === 1){
                            // Update Product Name
                            
                            products[selectedProduct].name = prompt('Enter New Product Name')
                           }else if(selectedDataToUpdate === 2){
                            // Update Product Price
                            products[selectedProduct].price = Number(prompt('Enter New Product Price'))
                           }else if(selectedDataToUpdate === 3){
                            // Update Product Stock
                            products[selectedProduct].stock = Number(prompt('Enter New Product Stock'))
                           }
                        }else if(selectedMenu === 3){
                            // Delete Product
                            do{
                                var selectedProduct = Number(prompt(`${ShowProducts(products)} \n Select Product to Delete:`))-1
                            }while(selectedProduct < 0 || selectedProduct >= products.length)
                            
                            var isDeleted = Number(prompt(`Are You Sure Want to Delete this Product? ${products[selectedProduct].name} \n 1. YES \n 2. NO`))

                            if(isDeleted === 1){
                                relistingProducts.push(products[selectedProduct])
                                products.splice(selectedProduct, 1)
                                alert('Delete Product Success!')
                            }
                        }else if(selectedMenu === 4){
                            // Relisting Product
                            var selectedProduct = Number(prompt(`${ShowProducts(relistingProducts)} \n Select Product to Relisting`))-1
                            let newPrice = Number(prompt('New Price'))
                            let newStock = Number(prompt('New Stock'))

                            products.push({
                                name: relistingProducts[selectedProduct].name, 
                                price: newPrice, 
                                stock: newStock
                            })

                            relistingProducts.splice(selectedProduct, 1)

                            alert('Relisting Product Success!')
                        }
                    }while(selectedMenu < 0 || selectedMenu > adminMenus.length-1 || showPrompt === true)
                }
            }while(checkAdminLogin === false)
        }else if(selectedUser === 2){
            // MENU USER
            prompt('1. Product List')
        }
    }while(selectedUser != 1 && selectedUser != 2)
</script>