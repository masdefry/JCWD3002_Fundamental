<script>
    const admins = [
        {
            username: 'ryan01', 
            password: 'abc123'
        },
        {
            username: 'avi01', 
            password: 'bca321'
        }
    ]

    const products = [
        {
            name: 'Iphone 11', 
            price: 6000000,
            stock: 30, 
        },
        {
            name: 'Samsung Z Flip', 
            price: 15000000, 
            stock: 15
        }
    ]

    const archievesProducts = []

    // MAIN MENU
    do{
        var selectedUser = Number(prompt('Select User: \n 1. Admin \n 2. User'))

        if(selectedUser === 1){
            // MENU ADMIN
            do{
                let inputUsername = prompt('Input Username:')
                let inputPassword = prompt('Input Password:')

                var isLogin = false
                admins.forEach(item => {
                    if(item.username === inputUsername && item.password === inputPassword) isLogin = true
                })

                if(isLogin === false){
                    alert('Username or Password Invalid!')
                }else{
                    alert('Login Success!')
                    do{
                        var selectedMenu = Number(prompt(`1. Show List Product \n 2. Create New Product \n 3. Edit Product \n 4. Delete Product \n 5. Relisting Products`))
                        console.log(selectedMenu)
                        if(selectedMenu === 1){
                            let printProduct = ''
                            products.forEach((item, index) => {
                                printProduct += `${index+1}. ${item.name} (Stock: ${item.stock}): Rp. ${item.price.toLocaleString('id-ID')} \n`
                            })

                            alert(printProduct)
                        }else if(selectedMenu === 2){
                            do{
                                var newProductName = prompt('Product Name')

                                var isProductExist = false 
                                products.forEach((item) => {
                                    if(item.name.toLowerCase() === newProductName.toLowerCase()) isProductExist = true
                                })

                                if(isProductExist) alert('Product Already Exist!')
                            }while(isProductExist === true)
                            let newProductPrice = prompt('Product Price')
                            let newProductStock = prompt('Product Stock')

                            products.push({
                                name: newProductName, 
                                price: newProductPrice, 
                                stock: newProductStock
                            })

                            alert('New Product Successfully Added!')
                        }else if(selectedMenu === 3){
                            let printProduct = ''
                            products.forEach((item, index) => {
                                printProduct += `${index+1}. ${item.name} (Stock: ${item.stock}): Rp. ${item.price.toLocaleString('id-ID')} \n`
                            })

                            do{
                                var selectedProduct = Number(prompt(`Select Product to Edit \n ${printProduct}`))-1
                            
                                if(selectedProduct < 0 || selectedProduct > products.length-1){
                                    alert('Product Not Exist! Select Product Again!')
                                }else{
                                    var selectedProductToEdit = Number(prompt('Product to Edit: \n 1. Name \n 2. Price \n 3. Stock'))
                                
                                    if(selectedProductToEdit === 1){
                                        var newProductName = prompt('Enter New Product Name')
                                        products[selectedProduct].name = newProductName 
                                        alert('Edit Product Name Success!')
                                    }else if(selectedProductToEdit === 2){
                                        var newProductPrice = prompt('Enter New Product Price')
                                    }else{
                                        var newProductStock = prompt('Enter New Product Stock')
                                    }
                                }
                            }while(selectedProduct < 0 || selectedProduct > products.length-1)
                        }else if(selectedMenu === 4){
                            let printProduct = ''
                            products.forEach((item, index) => {
                                printProduct += `${index+1}. ${item.name} (Stock: ${item.stock}): Rp. ${item.price.toLocaleString('id-ID')} \n`
                            })

                            do{
                                var selectedProduct = Number(prompt(`Selects Product to Delete \n ${printProduct}`))-1
                            
                                if(selectedProduct < 0 || selectedProduct > products.length-1){
                                    alert('Product Not Exist! Select Product Again!')
                                }else{
                                    var isDelete = prompt(`
                                        Are You Sure Want to Delete this Product \n
                                        ${products[selectedProduct].name} (Stock: ${products[selectedProduct].stock}): Rp. ${products[selectedProduct].price.toLocaleString('id-ID')} \n
                                        1. Yes \n
                                        2. No
                                    `)

                                    
                                    if(isDelete == 1){
                                        archievesProducts.push({...products[selectedProduct]})
                                        products.splice(selectedProduct, 1)
                                        alert('Delete Product Success!!!')
                                    }
                                }
                            }while((selectedProduct < 0 || selectedProduct > products.length-1) && products.length > 0)
                        }else if(selectedMenu === 5){
                            let printArchievesProduct = ''
                            archievesProducts.forEach((item, index) => {
                                printArchievesProduct += `${index+1}. ${item.name} (Stock: ${item.stock}): Rp. ${item.price.toLocaleString('id-ID')} \n`
                            })

                            do{
                                var selectedProduct = Number(prompt(`Selects Product to Relist \n ${printArchievesProduct}`))-1
                            
                                if(selectedProduct < 0 || selectedProduct > archievesProducts.length-1){
                                    alert('Product Not Exist!')
                                }else{
                                    let newProductPrice = prompt('Product Price')
                                    let newProductStock = prompt('Product Stock')

                                    products.push({
                                        name: archievesProducts[selectedProduct].name, 
                                        price: newProductPrice, 
                                        stock: newProductStock
                                    })

                                    alert('Relist Product Success!')
                                }
                            }while(selectedProduct < 0 || selectedProduct > archievesProducts.length-1)
                        }
                    }while(selectedMenu === 1 || selectedMenu === 2 || selectedMenu === 3 || selectedMenu === 4 || selectedMenu === 5)
                }
            }while(isLogin === false)
        }else if(selectedUser === 2){
            // MENU USER
            prompt('1. Product List')
        }
    }while(selectedUser != 1 && selectedUser != 2)
</script>